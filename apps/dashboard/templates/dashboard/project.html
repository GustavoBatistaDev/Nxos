{% extends 'dashboard/base_dashboard.html'%}

{% block 'main'%}
<div class="container">
    <div class="row mb-2">
        <div class="col-sm-3 mr-auto">
            <button type="button" data-toggle="modal" data-target="#myModal" class="p-2 button-new-project">Project<span> <i class="fa-solid fa-plus "></i></span></button>
        </div>
    </div>    
</div>    

{% if not request.user.projects_set.exists%}
    <h1 class="mx-auto text-white"> You don't have any projects yet. </h1>
{% else %}

  <div class="card container rounded-3">
     <div class="row pt-3 text-white p-2 justify-content-center">
      {% for i in projects%}
      <div class="  cards col-md-2 p-4 m-1 ">
        <h5 class="">{{i}}</h5>
         <div class="my-2">
          <a class="mt-5 mx-auto" href="{% url 'dashboard:edit' i.id%}">Edit</a>
          <a type="button"  data-toggle="modal" data-target="#exampleModal" class="mt-5 text-danger" id="delete" href="{% url 'dashboard:delete' i.id%}">Delete</a>
         </div>
      </div>
      {% endfor%}
     </div>   
  </div>


   
{% endif %}


<!-- Modal -->
<div class="modal" id="myModal">
  <div class="modal-dialog modal-lg text-white" >
    <form id="myForm" action="{% url 'dashboard:projects' %}" method="POST">{% csrf_token %}
        <div class="modal-content">
    
            <!-- Cabeçalho do Modal -->
            <div class="modal-header">
              <h4 class="modal-title">
                  {% if request.user.fullname%}
                     New project de {{request.user.fullname}}
                  {% else%}
                      Petições de {{request.user.first_name}}
                  {% endif%}
              </h4>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            
            <!-- Corpo do Modal -->
            <div class="modal-body">
              <div class="form-group">
                <label for="titulo">Título:</label>
                <input type="text" name="title" class="form-control" id="titulo">
              </div>
              <div class="form-group " >
                <label for="texto">Texto:</label>
                <textarea name="body" rows="20" cols="10" class="form-control" id="texto"></textarea>
              </div>
            </div>
            
            <!-- Rodapé do Modal -->
            <div class="modal-footer">
             <form action="{% url 'dashboard:projects'%}" method="POST">{% csrf_token %}
              <button type="button" class="btn btn-danger" data-dismiss="modal">Fechar</button>
              <button type="submit" class="button-new-project p-2">Salvar</button>
             </form>
            </div>
            
          </div>
    </form>
  </div>
</div>

<!-- Button trigger modal -->


<!-- Modal -->
<div class="modal fade text-white" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Delete?</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>Do you want to delete this project?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button id="confirm" type="button" class="btn btn-danger">Delete</button>
      </div>
    </div>
  </div>
</div>


   
{% endblock %}
  


